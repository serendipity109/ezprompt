FROM node:lts-alpine

RUN npm install @vue/cli@5.0.8 -g

COPY ./frontend /workspace

WORKDIR /workspace

RUN npm install

HEALTHCHECK --start-period=10m --interval=10m --timeout=10m --retries=3 \
    CMD curl http://127.0.0.1:8080

CMD ["sh", "-c", "npm run build && npm run serve"]